---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { signs } from '../../data/zodiac';

export function getStaticPaths() {
  return signs.map((sign, i) => ({
    params: { slug: sign.slug },
    props: {
      sign,
      prev: signs[(i - 1 + signs.length) % signs.length],
      next: signs[(i + 1) % signs.length],
    },
  }));
}

const { sign, prev, next } = Astro.props;
const base = import.meta.env.BASE_URL;
---
<BaseLayout title={`${sign.name} ‚Äî Celestial Tarot`} description={sign.description}>
  <section class="hero">
    <div class="container">
      <span class="symbol">{sign.symbol}</span>
      <h1>{sign.name}</h1>
      <p class="meta">{sign.dates} ¬∑ {sign.element} ¬∑ Ruled by {sign.ruling}</p>
    </div>
  </section>

  <section class="container content">
    <p class="description">{sign.description}</p>

    {sign.youtubeId ? (
      <div class="video">
        <iframe
          src={`https://www.youtube.com/embed/${sign.youtubeId}`}
          title={`${sign.name} Tarot Reading`}
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        />
      </div>
    ) : (
      <div class="video-placeholder">
        <p>üîÆ Video reading for {sign.name} coming soon!</p>
        <a href="https://youtube.com/@Celestia1Tarot" target="_blank">Subscribe on YouTube ‚Üí</a>
      </div>
    )}

    <div class="reading">
      <h2>‚ú¶ Your Cosmic Message</h2>
      <p>The stars have aligned to bring you a message of transformation and growth. As a {sign.name}, your {sign.element.toLowerCase()} energy guides you through challenges with the wisdom of {sign.ruling}. Trust your path ‚Äî the universe is conspiring in your favor.</p>
      <p>This season invites you to embrace change, release what no longer serves you, and step boldly into the next chapter of your cosmic journey. The tarot reveals that your greatest strength lies in your ability to {sign.element === 'Fire' ? 'ignite passion in others' : sign.element === 'Earth' ? 'build lasting foundations' : sign.element === 'Air' ? 'connect minds and hearts' : 'navigate emotional depths'}.</p>
    </div>

    <div class="nav-signs">
      <a href={`${base}zodiac/${prev.slug}/`}>‚Üê {prev.symbol} {prev.name}</a>
      <a href={`${base}zodiac/`}>All Signs</a>
      <a href={`${base}zodiac/${next.slug}/`}>{next.name} {next.symbol} ‚Üí</a>
    </div>

    <div class="cta-box">
      <h3>Get Personalized Readings</h3>
      <p>Subscribe to our newsletter for weekly {sign.name} insights.</p>
      <a href={base} class="cta-btn">Subscribe ‚ú¶</a>
    </div>
  </section>
</BaseLayout>

<style>
  .hero {
    text-align: center;
    padding: 6rem 0 3rem;
    background: radial-gradient(ellipse at center, rgba(26,26,62,0.6) 0%, transparent 70%);
  }
  .symbol { font-size: 5rem; display: block; margin-bottom: 0.5rem; }
  .hero h1 { font-size: 3rem; }
  .meta { color: var(--gold); margin-top: 0.5rem; font-size: 1.1rem; }

  .content { max-width: 800px; }
  .description {
    font-size: 1.2rem;
    line-height: 1.8;
    margin-bottom: 2rem;
    color: var(--text);
  }

  .video { position: relative; padding-bottom: 56.25%; height: 0; margin-bottom: 2rem; }
  .video iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px; }

  .video-placeholder {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 3rem;
    text-align: center;
    margin-bottom: 2rem;
  }
  .video-placeholder a { display: inline-block; margin-top: 1rem; }

  .reading {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
  }
  .reading h2 { margin-bottom: 1rem; font-size: 1.5rem; }
  .reading p { color: var(--text-muted); margin-bottom: 1rem; }

  .nav-signs {
    display: flex;
    justify-content: space-between;
    padding: 1.5rem 0;
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    margin-bottom: 2rem;
  }
  .nav-signs a { color: var(--text-muted); }
  .nav-signs a:hover { color: var(--accent); }

  .cta-box {
    text-align: center;
    background: rgba(26,26,62,0.4);
    border-radius: 12px;
    padding: 2rem;
  }
  .cta-box h3 { margin-bottom: 0.5rem; }
  .cta-box p { color: var(--text-muted); margin-bottom: 1rem; }
  .cta-btn {
    display: inline-block;
    background: linear-gradient(135deg, var(--bg-secondary), #2a2a6e);
    color: var(--accent);
    padding: 0.8rem 2rem;
    border-radius: 50px;
    border: 1px solid var(--accent);
  }
  .cta-btn:hover { background: var(--accent); color: var(--bg-primary); opacity: 1; }
</style>
